<ion-content [ngClass]="{'background-color-transparent': showCameraInterface, 'white-bg': !showCameraInterface}" #contentArea>
    <ion-progress-bar [value]="totalPercent" mode="ios" color="success" class="progress-bar-height"></ion-progress-bar>
    <ion-grid class="colored" #header>
        <ion-row justify-content-center>
            <ion-col size="auto" class="ion-no-padding">
                <ion-button fill="clear" size="small" (click)="goBack()">
                    <ion-icon name="chevron-back-outline" color="light"></ion-icon>
                </ion-button>
            </ion-col>
            <ion-col class="ion-no-padding end-centered">
                <ion-icon name="information-circle" class="info-icon"></ion-icon>
                <span>Capture {{itemName}} {{selectedImageModel.imageTitle}}</span>
            </ion-col>
        </ion-row>
    </ion-grid>
    <div class="ion-no-padding black-bg" *ngIf="!showCameraInterface && !showForm" [style.height.px]="imageAreaHeight">
        <ion-img *ngIf="selectedImageModel.image" [src]="selectedImageModel.image" class="object-fit-contain"></ion-img>
    </div>
    <div class="ion-no-padding" *ngIf="!showCameraInterface && showForm">
        <form [formGroup]="detailsForm" class="white-bg">
            <ion-grid class="ion-padding">
                <ion-row>
                    <ion-col size="6">
                        <app-auto-complete [dataList]="listOfSolarMake" placeholder="module make*"
                                           formControlName="modulemake"></app-auto-complete>
                    </ion-col>
                    <ion-col size="6">
                        <app-auto-complete [dataList]="listOfSolarMade" placeholder="module model*"
                                           formControlName="modulemodel"></app-auto-complete>

                    </ion-col>
                </ion-row>

                <ion-row>
                    <ion-col size="6">
                        <app-auto-complete [dataList]="listOfInverterMake" placeholder="inverter make*"
                                           formControlName="invertermake"></app-auto-complete>
                    </ion-col>
                    <ion-col size="6">
                        <app-auto-complete [dataList]="listOfInverterMade" placeholder="inverter model*"
                                           formControlName="invertermodel"></app-auto-complete>
                    </ion-col>
                </ion-row>

                <ion-row>
                    <ion-col size="12">
                        <ion-item class="ion-no-padding">
                            <ion-label style="display: none">battery backup</ion-label>
                            <ion-select class="form_input select_div" placeholder="Battery Backup" ok-text="Ok"
                                        cancel-text="Cancel"
                                        formControlName="batterybackup">
                                <ion-select-option value="whole">Whole</ion-select-option>
                                <ion-select-option value="partial">Partial</ion-select-option>
                            </ion-select>
                        </ion-item>
                    </ion-col>
                </ion-row>


                <ion-row>
                    <ion-col size="12">
                        <ion-item class="ion-no-padding">
                            <ion-label style="display: none">service feed source</ion-label>
                            <ion-select class="form_input select_div" placeholder="service feed source" ok-text="Ok"
                                        cancel-text="Cancel"
                                        formControlName="servicefeedsource">
                                <ion-select-option value="underground">Underground</ion-select-option>
                                <ion-select-option value="overhead">Overhead</ion-select-option>
                            </ion-select>
                        </ion-item>
                    </ion-col>
                </ion-row>

            </ion-grid>
<!--            <ion-grid formArrayName="appliances" class="ion-padding">-->
<!--                <ion-row class="ion-align-items-center ion-justify-content-center">-->
<!--                    <ion-col class="ion-no-padding">-->
<!--                        <span class="input-placeholder ion-margin-start">appliance details</span>-->
<!--                    </ion-col>-->
<!--                    <ion-col size="auto">-->
<!--                        <ion-button fill="clear" class="action-button-color" (click)="addNewAppliance()">-->
<!--                            <ion-icon slot="start" name="add"></ion-icon>-->
<!--                            Add-->
<!--                        </ion-button>-->
<!--                    </ion-col>-->
<!--                </ion-row>-->
<!--                <ion-row *ngFor="let form of getAppliances().controls; let i=index" [formGroupName]="i"-->
<!--                         class="ion-align-items-center ion-justify-content-center">-->
<!--                    <ion-col>-->
<!--                        <ion-item class="ion-no-padding">-->
<!--                            <ion-input placeholder="name" class="form_input" autocapitalize="words"-->
<!--                                       formControlName="name"></ion-input>-->
<!--                        </ion-item>-->
<!--                    </ion-col>-->
<!--                    <ion-col size="3">-->
<!--                        <ion-item class="ion-no-padding">-->
<!--                            <ion-input placeholder="amp" class="form_input" autocapitalize="words"-->
<!--                                       formControlName="amp"></ion-input>-->
<!--                        </ion-item>-->
<!--                    </ion-col>-->
<!--                    <ion-col size="auto">-->
<!--                        <ion-button fill="clear" class="action-button-color" (click)="removeAppliance(i)">-->
<!--                            <ion-icon name="close"></ion-icon>-->
<!--                        </ion-button>-->
<!--                    </ion-col>-->
<!--                </ion-row>-->
<!--            </ion-grid>-->
            <ion-grid class="ion-padding">
                <ion-row>
                    <ion-col size="12">
                        <ion-item class="ion-no-padding">
                            <ion-input placeholder="permitDesign" class="form_input" autocapitalize="words"
                                       formControlName="permitDesign"></ion-input>
                        </ion-item>
                    </ion-col>
                </ion-row>

                <ion-row class="ion-margin-top">
                    <ion-col size="12" class="ion-no-padding">
                        <span class="input-placeholder">additionalNotes</span>
                    </ion-col>
                    <ion-col size="12" class="ion-no-padding">
                        <ion-textarea class="ion-no-margin ion-no-padding comment_box" rows="3"
                                      formControlName="additionalNotes"></ion-textarea>
                    </ion-col>
                </ion-row>
            </ion-grid>

            <ion-grid>
                <ion-row>
                    <ion-col></ion-col>
                    <ion-col size="auto">
                        <ion-button class="action-button-color" fill="clear" (click)="saveSurvey()">Done</ion-button>
                    </ion-col>
                </ion-row>
            </ion-grid>

        </form>
    </div>
</ion-content>

<ion-footer class="colored ion-no-border">
    <ion-grid>
        <ion-row *ngIf="showCameraInterface && !showForm">
            <ion-col *ngFor="let menu of subMenu; let j = index" class="ion-text-center"
                     (click)="selectSubMenu(menu, j)">
                <ion-row class="ion-align-items-center ion-justify-content-center">
                    <ion-col size="12">
                        <span class="deselected-menu" [ngClass]="{'selected-menu' : menu.isSelected}">
                            {{menu.name}}
                        </span>
                    </ion-col>
                </ion-row>
            </ion-col>
        </ion-row>
        <ion-row class="ion-align-items-center ion-justify-content-center" *ngIf="showCameraInterface && !showForm">
            <ion-col size="4">
            </ion-col>
            <ion-col size="4" class="ion-text-center">
                <span class="camera-button" (click)="takePicture()"></span>
            </ion-col>
            <ion-col size="4" class="ion-align-items-center ion-justify-content-center ion-text-center">
                <ion-item *ngIf="listOfImages.length != 0" lines="none" (click)="openGallery()">
                    <ion-img [src]="listOfImages[listOfImages.length-1]" class="gallery-image"></ion-img>
                </ion-item>

            </ion-col>
        </ion-row>
        <ion-row class="ion-no-padding ion-no-margin ion-padding-top">
            <ion-col *ngFor="let menu of mainMenu; let i = index" class="ion-text-center ion-no-padding ion-no-margin">
                <ion-row class="ion-align-items-center ion-justify-content-center" (click)="selectMenu(menu, i)">
                    <ion-col size="12" class="ion-no-margin ion-no-padding">
                        <span class="deselected-menu" [ngClass]="{'selected-menu' : menu.isSelected}">
                            {{menu.name}}
                        </span>
                    </ion-col>
                    <ion-col size="12" *ngIf="menu.isSelected" class="ion-no-margin ion-no-padding ion-text-center">
                        <span class="selected-main-menu"></span>
                    </ion-col>
                </ion-row>
            </ion-col>
        </ion-row>
    </ion-grid>

</ion-footer>

