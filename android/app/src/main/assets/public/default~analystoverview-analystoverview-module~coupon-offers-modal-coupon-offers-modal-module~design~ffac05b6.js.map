{"version":3,"sources":["./src/app/coupon-offers-modal/coupon-offers-modal-routing.module.ts","./src/app/coupon-offers-modal/coupon-offers-modal.page.ts","./src/app/coupon-offers-modal/coupon-offers-modal.module.ts","./src/app/coupon-offers-modal/coupon-offers-modal.page.html","./src/app/coupon-offers-modal/coupon-offers-modal.page.scss"],"names":[],"mappings":"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","file":"default~analystoverview-analystoverview-module~coupon-offers-modal-coupon-offers-modal-module~design~ffac05b6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CouponOffersModalPage } from './coupon-offers-modal.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CouponOffersModalPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CouponOffersModalPageRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ApiService } from '../api.service';\r\nimport { ModalController, NavController, NavParams } from '@ionic/angular';\r\nimport { UtilitiesService } from '../utilities.service';\r\nimport { FormGroup, FormBuilder, FormControl } from '@angular/forms';\r\nimport { StorageService } from '../storage.service';\r\nimport { MixpanelService } from '../utilities/mixpanel.service';\r\n\r\n@Component({\r\n  selector: 'app-coupon-offers-modal',\r\n  templateUrl: './coupon-offers-modal.page.html',\r\n  styleUrls: ['./coupon-offers-modal.page.scss'],\r\n})\r\nexport class CouponOffersModalPage implements OnInit {\r\n\r\n  couponForm:FormGroup\r\n  Coupons:any;\r\n  selectedCoupon:any;\r\n  selecteduserId=null;\r\n  user:any\r\n error:any\r\n  requesttype:any\r\n\r\n  constructor(\r\n    private apiservice:ApiService,\r\n    private modalctrl:ModalController,\r\n    private utils:UtilitiesService,\r\n    private formBuilder : FormBuilder,\r\n    private storageService:StorageService,\r\n    private nav:NavParams,\r\n    private mixpanelService:MixpanelService\r\n  ) { \r\n    this.couponForm = this.formBuilder.group({\r\n      couponInput : new FormControl('')\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.requesttype= this.nav.get('request');\r\n    this.apiservice.getCoupons(this.requesttype).subscribe((res)=>{\r\n      this.Coupons=res;\r\n      console.log(this.Coupons);\r\n    },\r\n    (error)=>{\r\n\r\n    })\r\n    this.user=this.storageService.getUser();\r\n    this.mixpanelService.track(\"COUPON_OFFER_PAGE_OPEN\", {\r\n    });\r\n  }\r\n \r\n  selectCoupon(coupondata:any) {\r\n    console.log(this.couponForm.get('couponInput').value)\r\n    console.log(\"this is\",coupondata)\r\n    // this.assigneeData.emit(assignee);\r\n    this.Coupons.forEach((item) => {\r\n      item.selected = false;\r\n     \r\n    });\r\n    \r\n    if (coupondata.id === this.selecteduserId) {\r\n      this.selecteduserId = null;\r\n      this.selectedCoupon=null;\r\n      this.couponForm.patchValue({\r\n        couponInput:\"\"\r\n      })\r\n      console.log(this.selectedCoupon);\r\n      \r\n    } else {\r\n      coupondata.selected = true;\r\n      console.log(coupondata);\r\n      this.selectedCoupon=coupondata\r\n      this.couponForm.patchValue({\r\n        couponInput:coupondata.code\r\n      })\r\n      this.selecteduserId = coupondata.id;\r\n      this.error=null;\r\n      console.log(this.selectedCoupon);\r\n      \r\n    }\r\n  }\r\n  \r\n  changeInput(){\r\n    this.error=null;\r\n  }\r\n\r\n  applycode(){\r\n\r\n    if(this.couponForm.get('couponInput').value !=''){\r\n      this.utils.showLoading(\"Applying\").then(()=>{\r\n        const postData={\r\n          couponcode:this.couponForm.get('couponInput').value,\r\n          userid:this.user.parent.id,\r\n          requesttype:this.requesttype\r\n      }\r\n      this.apiservice.sendCoupon(postData).subscribe((res)=>{\r\n        console.log(res);\r\n        this.selectedCoupon=res;\r\n        if(this.selectedCoupon.error){\r\n        this.error=this.selectedCoupon.message;\r\n        this.selectedCoupon=null\r\n        }\r\n        else{\r\n        this.modalctrl.dismiss({\r\n          'dismissed':true,\r\n          data:this.selectedCoupon\r\n        })\r\n      }},\r\n     (error)=>{this.utils.errorSnackBar(\"Invalid Coupon Code\")})\r\n        \r\n        this.utils.hideLoading();\r\n        }\r\n        )\r\n \r\n    }\r\n    else if(this.selectedCoupon!=null){\r\n   this.utils.showLoading(\"Applying\").then(()=>{\r\n \r\n    this.modalctrl.dismiss({\r\n    'dismissed':true,\r\n    data:this.selectedCoupon\r\n   })\r\n  this.utils.hideLoading();\r\n}\r\n)}\r\nelse{\r\n  this.utils.errorSnackBar(\"Please select or enter a promo code\");\r\n}\r\n  }\r\n\r\n\r\n  cancel(){\r\n    this.modalctrl.dismiss({\r\n      'dismissed': true,\r\n      cancel:'cancel'\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CouponOffersModalPageRoutingModule } from './coupon-offers-modal-routing.module';\r\n\r\nimport { CouponOffersModalPage } from './coupon-offers-modal.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CouponOffersModalPageRoutingModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [CouponOffersModalPage]\r\n})\r\nexport class CouponOffersModalPageModule {}\r\n","export default \"\\r\\n\\r\\n\\r\\n  \\r\\n  <ion-row><ion-col size=\\\"0\\\"> </ion-col>\\r\\n    <ion-col size=\\\"9\\\" style=\\\"align-self: center; font-size: larger;font-weight: bolder;\\\"> Apply Coupon</ion-col>\\r\\n    <ion-col><ion-button fill=\\\"clear\\\" size=\\\"small\\\" class=\\\"ion-no-padding\\\" style=\\\"float:right\\\" (click)=\\\"cancel()\\\">\\r\\n      <ion-icon name=\\\"close-outline\\\" style=\\\"color: dimgrey;\\\" size=\\\"large\\\"></ion-icon>\\r\\n  </ion-button></ion-col>\\r\\n  \\r\\n  </ion-row>\\r\\n  \\r\\n  <div style=\\\"height:17%;width: 100%;background-color:gainsboro;align-self: center;\\\"><br>\\r\\n    <form [formGroup]=\\\"couponForm\\\">\\r\\n<ion-row><ion-col size='12' style=\\\"padding-bottom: 4px;\\\" class=\\\"ion-padding\\\"><ion-input type=\\\"text\\\" class=\\\"input_class\\\" autocapitalize=\\\"words\\\"\\r\\n  style=\\\"font-size: small;\\\" placeholder=\\\"Have a promocode?Enter here\\\" formControlName=\\\"couponInput\\\" maxlength=\\\"15\\\"  (ionChange)=\\\"changeInput()\\\"></ion-input>\\r\\n</ion-col></ion-row>\\r\\n<ion-row *ngIf=\\\"error!==null\\\" style=\\\"margin-left: 19px;\\\"><span class=\\\"error\\\">{{error}}</span></ion-row></form></div>\\r\\n\\r\\n\\r\\n<ion-row style=\\\"margin-top: 10px;margin-left:5%\\\">\\r\\n<span style=\\\"text-align: center; font-size: initial;font-weight: bold;\\\">AVAILABLE COUPONS</span>\\r\\n</ion-row>\\r\\n<ion-content [scrollEvents]=\\\"true\\\">\\r\\n<div *ngFor=\\\"let coupon of Coupons\\\" (click)=\\\"selectCoupon(coupon)\\\" style=\\\"padding: 2px;\\\" >\\r\\n<ion-card   [class.selected]=\\\"coupon.selected\\\" [class.normal]=\\\"!coupon.selected \\\" ><ion-row style=\\\"margin-top: 5px;\\\"><ion-col size=\\\"8\\\">\\r\\n  <span style=\\\"font-weight: bold;font-size: revert; margin-left: 10px;color: black;\\\">{{coupon.title}}</span></ion-col>\\r\\n <ion-col><span style=\\\"font-weight: bold;float:right;background-color: green;color: white;height:100%;width:100%;text-align: center;\\\">{{coupon.code}}</span> </ion-col>\\r\\n</ion-row>\\r\\n  <ion-row> <span style=\\\"margin-left: 10px;margin-top: 7px;margin-bottom: 5px;\\\">{{coupon.description}}</span></ion-row>\\r\\n</ion-card>\\r\\n</div>\\r\\n\\r\\n</ion-content>\\r\\n<ion-footer class=\\\"ion-padding ion-no-border\\\" ><ion-button  expand=\\\"full\\\" shape=\\\"block\\\" (click)=\\\"applycode()\\\">Apply</ion-button></ion-footer>\";","export default \".clickEnableCls {\\n  pointer-events: visible !important;\\n}\\n\\n.input_class {\\n  background-color: white;\\n  font-size: initial;\\n  border-width: 2px 4px;\\n  align-self: center;\\n}\\n\\n.selected {\\n  border: dotted;\\n  border-color: limegreen;\\n  background: aliceblue;\\n}\\n\\n.normal {\\n  border: dotted;\\n  border-color: lightgrey;\\n}\\n\\n.error {\\n  color: #df3e3e;\\n  font-size: 14px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXGNvdXBvbi1vZmZlcnMtbW9kYWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0NBQUE7QUFDSjs7QUFDQztFQUNHLHVCQUFBO0VBQ0Esa0JBQUE7RUFDQSxxQkFBQTtFQUVGLGtCQUFBO0FBQ0Y7O0FBR0M7RUFDRyxjQUFBO0VBQ0EsdUJBQUE7RUFDQSxxQkFBQTtBQUFKOztBQUdFO0VBQ0UsY0FBQTtFQUNBLHVCQUFBO0FBQUo7O0FBRUU7RUFDRSxjQUFBO0VBQ0EsZUFBQTtBQUNKIiwiZmlsZSI6ImNvdXBvbi1vZmZlcnMtbW9kYWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNsaWNrRW5hYmxlQ2xze1xyXG4gICAgcG9pbnRlci1ldmVudHM6IHZpc2libGUgIWltcG9ydGFudDtcclxuIH1cclxuIC5pbnB1dF9jbGFzc3tcclxuICAgIGJhY2tncm91bmQtY29sb3I6d2hpdGU7XHJcbiAgICBmb250LXNpemU6aW5pdGlhbDtcclxuICAgIGJvcmRlci13aWR0aDogMnB4IDRweDtcclxuICAvLyBib3JkZXItcmFkaXVzOiAxNXB4O1xyXG4gIGFsaWduLXNlbGY6IGNlbnRlcjtcclxuIH1cclxuXHJcblxyXG4gLnNlbGVjdGVkIHtcclxuICAgIGJvcmRlcjogZG90dGVkO1xyXG4gICAgYm9yZGVyLWNvbG9yOmxpbWVncmVlbjtcclxuICAgIGJhY2tncm91bmQ6IGFsaWNlYmx1ZTtcclxuICB9XHJcbiAgXHJcbiAgLm5vcm1hbCB7XHJcbiAgICBib3JkZXI6IGRvdHRlZDtcclxuICAgIGJvcmRlci1jb2xvcjogbGlnaHRncmV5O1xyXG4gIH1cclxuICAuZXJyb3Ige1xyXG4gICAgY29sb3I6IHJnYigyMjMsIDYyLCA2Mik7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgfSJdfQ== */\";"],"sourceRoot":"webpack:///"}